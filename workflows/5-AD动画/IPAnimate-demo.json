{"id":"7b8ed58d-bd6b-4b79-b3e6-82aa4b8e7a58","revision":0,"last_node_id":69,"last_link_id":164,"nodes":[{"id":46,"type":"ShowText|pysssss","pos":[1925,959],"size":[319.0539245605469,116.03609466552734],"flags":{},"order":22,"mode":0,"inputs":[{"label":"文本","localized_name":"text","name":"text","type":"STRING","link":153}],"outputs":[{"label":"字符串","localized_name":"STRING","name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"ba22ba11e9073d45c5779d557593b2f106aac8b4","Node name for S&R":"ShowText|pysssss","widget_ue_connectable":{}},"widgets_values":["{'index': 7, 'use_controlnet': True, 'image_index': (0, 1), 'ipadapter_strength': [0.3736161146605351, 0.8517540966287267], 'contronet_strength': [0.11208483439816054, 0.255526228988618]}"]},{"id":37,"type":"EmptyLatentImage","pos":[1931,1123],"size":[315,106],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"label":"Latent","localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[133]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"EmptyLatentImage","widget_ue_connectable":{}},"widgets_values":[512,512,1]},{"id":51,"type":"SaveImage","pos":[2950,738],"size":[800,640],"flags":{},"order":24,"mode":0,"inputs":[{"label":"图像","localized_name":"images","name":"images","type":"IMAGE","link":129},{"label":"文件名前缀","localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":127}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"SaveImage","widget_ue_connectable":{}},"widgets_values":["IPA/11/0"]},{"id":55,"type":"CLIPSetLastLayer","pos":[1016,762],"size":[315,58],"flags":{},"order":15,"mode":0,"inputs":[{"label":"CLIP","localized_name":"clip","name":"clip","type":"CLIP","link":141},{"localized_name":"stop_at_clip_layer","name":"stop_at_clip_layer","type":"INT","widget":{"name":"stop_at_clip_layer"},"link":null}],"outputs":[{"label":"CLIP","localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[139]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"CLIPSetLastLayer","widget_ue_connectable":{}},"widgets_values":[-2]},{"id":60,"type":"TilePreprocessor","pos":[1024,1335],"size":[315,82],"flags":{},"order":17,"mode":0,"inputs":[{"label":"图像","localized_name":"image","name":"image","type":"IMAGE","link":163},{"localized_name":"pyrUp_iters","name":"pyrUp_iters","shape":7,"type":"INT","widget":{"name":"pyrUp_iters"},"link":null},{"localized_name":"resolution","name":"resolution","shape":7,"type":"INT","widget":{"name":"resolution"},"link":null}],"outputs":[{"label":"图像","localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[161]}],"properties":{"cnr_id":"comfyui_controlnet_aux","ver":"83463c2e4b04e729268e57f638b4212e0da4badc","Node name for S&R":"TilePreprocessor","widget_ue_connectable":{}},"widgets_values":[3,512]},{"id":61,"type":"Note","pos":[1378,1469],"size":[210,88],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{"text":"","widget_ue_connectable":{}},"widgets_values":["注意：每次启动需要设置为value=0"],"color":"#432","bgcolor":"#653"},{"id":62,"type":"Note","pos":[2687,979],"size":[210,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"text":"","widget_ue_connectable":{}},"widgets_values":["注意：请固定随机种子"],"color":"#432","bgcolor":"#653"},{"id":63,"type":"VHS_VideoCombine","pos":[2338.421142578125,1385.762939453125],"size":[210,334],"flags":{},"order":14,"mode":4,"inputs":[{"label":"图像","localized_name":"images","name":"images","type":"IMAGE","link":148},{"label":"audio","localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"label":"GIF","localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"df55f01d1df2f7bf5cc772294bc2e6d8bab22d66","Node name for S&R":"VHS_VideoCombine","widget_ue_connectable":{}},"widgets_values":{"frame_rate":10,"loop_count":0,"filename_prefix":"ipa","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"inpippop_00004.mp4","subfolder":"","type":"output","format":"video/h264-mp4"}}},"color":"#233","bgcolor":"#355"},{"id":64,"type":"VHS_LoadImagesPath","pos":[1950,1385],"size":[315,194],"flags":{},"order":3,"mode":4,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"directory","name":"directory","type":"STRING","widget":{"name":"directory"},"link":null},{"localized_name":"image_load_cap","name":"image_load_cap","shape":7,"type":"INT","widget":{"name":"image_load_cap"},"link":null},{"localized_name":"skip_first_images","name":"skip_first_images","shape":7,"type":"INT","widget":{"name":"skip_first_images"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","shape":7,"type":"INT","widget":{"name":"select_every_nth"},"link":null}],"outputs":[{"label":"图像","localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[148]},{"label":"遮罩","localized_name":"MASK","name":"MASK","type":"MASK","links":null},{"label":"整数","localized_name":"frame_count","name":"frame_count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"df55f01d1df2f7bf5cc772294bc2e6d8bab22d66","Node name for S&R":"VHS_LoadImagesPath","widget_ue_connectable":{}},"widgets_values":{"directory":"/root/autodl-tmp/outputs/IPA/01/","image_load_cap":0,"skip_first_images":0,"select_every_nth":1,"choose folder to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"frame_load_cap":0,"skip_first_images":0,"filename":"/root/autodl-tmp/outputs/IPA/01/","type":"path","format":"folder","select_every_nth":1}}},"color":"#233","bgcolor":"#355"},{"id":65,"type":"Note","pos":[2692,1088],"size":[210,88],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{"text":"","widget_ue_connectable":{}},"widgets_values":["注意：请设置auto Queue"],"color":"#432","bgcolor":"#653"},{"id":66,"type":"Note","pos":[1956,1652],"size":[210,88],"flags":{},"order":5,"mode":4,"inputs":[],"outputs":[],"properties":{"text":"","widget_ue_connectable":{}},"widgets_values":["注意：生成完视频后，可基于该流合并成视频"],"color":"#432","bgcolor":"#653"},{"id":52,"type":"PrimitiveNode","pos":[2693,856],"size":[210,58],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"label":"STRING","name":"STRING","type":"STRING","widget":{"name":"filename_prefix"},"links":[127]}],"properties":{"Run widget replace on values":false,"widget_ue_connectable":{}},"widgets_values":["IPA/11/0"],"color":"#323","bgcolor":"#535"},{"id":12,"type":"ImpactValueSender","pos":[1929,828],"size":[315,78],"flags":{},"order":21,"mode":0,"inputs":[{"label":"值","localized_name":"value","name":"value","type":"*","link":152},{"label":"signal_opt","localized_name":"signal_opt","name":"signal_opt","shape":7,"type":"*","link":null},{"localized_name":"link_id","name":"link_id","type":"INT","widget":{"name":"link_id"},"link":null}],"outputs":[{"label":"signal","localized_name":"signal","name":"signal","type":"*","links":null}],"properties":{"Node name for S&R":"ImpactValueSender","widget_ue_connectable":{}},"widgets_values":[1]},{"id":10,"type":"ImpactValueReceiver","pos":[1019,1463],"size":[315,106],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"typ","name":"typ","type":"COMBO","widget":{"name":"typ"},"link":null},{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null},{"localized_name":"link_id","name":"link_id","type":"INT","widget":{"name":"link_id"},"link":null}],"outputs":[{"label":"输出","localized_name":"*","name":"*","type":"*","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"ImpactValueReceiver","widget_ue_connectable":{}},"widgets_values":["INT",8,1],"color":"#432","bgcolor":"#653"},{"id":54,"type":"KSampler //Inspire","pos":[2291.10791015625,711.439453125],"size":[311.197509765625,402],"flags":{},"order":20,"mode":0,"inputs":[{"label":"模型","localized_name":"model","name":"model","type":"MODEL","link":149},{"label":"正面条件","localized_name":"positive","name":"positive","type":"CONDITIONING","link":150},{"label":"负面条件","localized_name":"negative","name":"negative","type":"CONDITIONING","link":151},{"label":"Latent","localized_name":"latent_image","name":"latent_image","type":"LATENT","link":133},{"localized_name":"scheduler_func_opt","name":"scheduler_func_opt","shape":7,"type":"SCHEDULER_FUNC","link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null},{"localized_name":"noise_mode","name":"noise_mode","type":"COMBO","widget":{"name":"noise_mode"},"link":null},{"localized_name":"batch_seed_mode","name":"batch_seed_mode","type":"COMBO","widget":{"name":"batch_seed_mode"},"link":null},{"localized_name":"variation_seed","name":"variation_seed","type":"INT","widget":{"name":"variation_seed"},"link":null},{"localized_name":"variation_strength","name":"variation_strength","type":"FLOAT","widget":{"name":"variation_strength"},"link":null},{"localized_name":"variation_method","name":"variation_method","shape":7,"type":"COMBO","widget":{"name":"variation_method"},"link":null}],"outputs":[{"label":"Latent","localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[134]}],"properties":{"Node name for S&R":"KSampler //Inspire","widget_ue_connectable":{}},"widgets_values":[123456,"fixed",18,6,"dpmpp_2m","karras",1,"GPU(=A1111)","incremental",0,0,"linear"]},{"id":38,"type":"VAEDecode","pos":[2686,712.9663696289062],"size":[210,46],"flags":{},"order":23,"mode":0,"inputs":[{"label":"Latent","localized_name":"samples","name":"samples","type":"LATENT","link":134},{"label":"VAE","localized_name":"vae","name":"vae","type":"VAE","link":128}],"outputs":[{"label":"图像","localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[129]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"VAEDecode","widget_ue_connectable":{}},"widgets_values":[]},{"id":56,"type":"CheckpointLoaderSimple","pos":[465,736],"size":[400,120],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"label":"模型","localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[155]},{"label":"CLIP","localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[141]},{"label":"VAE","localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"CheckpointLoaderSimple","widget_ue_connectable":{}},"widgets_values":["AA\\majicMIX realistic _v1.safetensors"],"color":"#223","bgcolor":"#335"},{"id":69,"type":"LoadImage","pos":[448.7362365722656,356.33544921875],"size":[315,314],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[162,163,164]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"LoadImage","widget_ue_connectable":{"image":true}},"widgets_values":["66788.png","image"]},{"id":44,"type":"ControlNetLoader","pos":[1027,1224],"size":[315,58],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"control_net_name","name":"control_net_name","type":"COMBO","widget":{"name":"control_net_name"},"link":null}],"outputs":[{"label":"ControlNet","localized_name":"CONTROL_NET","name":"CONTROL_NET","type":"CONTROL_NET","slot_index":0,"links":[160]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"ControlNetLoader","widget_ue_connectable":{}},"widgets_values":["control_v11f1e_sd15_tile.pth"]},{"id":53,"type":"VAELoader","pos":[2278.8173828125,1187.1956787109375],"size":[315,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[128]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"VAELoader","widget_ue_connectable":{}},"widgets_values":["A-840000-ema-pruned-real.pt"]},{"id":58,"type":"PreviewImage","pos":[1045.92333984375,346.3315734863281],"size":[298.0774230957031,288.2717590332031],"flags":{},"order":16,"mode":0,"inputs":[{"label":"图像","localized_name":"images","name":"images","type":"IMAGE","link":162}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":20,"type":"CLIPTextEncode","pos":[1024.8929443359375,857.3801879882812],"size":[299.464599609375,88],"flags":{},"order":18,"mode":0,"inputs":[{"label":"CLIP","localized_name":"clip","name":"clip","type":"CLIP","link":139},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"label":"条件","localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[156,157]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{}},"widgets_values":[""]},{"id":68,"type":"IPAdapterAnimateNode","pos":[1467.40380859375,706.7431030273438],"size":[362.79998779296875,530.1678466796875],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":164},{"localized_name":"model","name":"model","type":"MODEL","link":155},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":156},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":157},{"localized_name":"ipadapter","name":"ipadapter","type":"IPADAPTER","link":158},{"localized_name":"clip_vision","name":"clip_vision","type":"CLIP_VISION","link":159},{"localized_name":"control_net","name":"control_net","shape":7,"type":"CONTROL_NET","link":160},{"localized_name":"control_images","name":"control_images","shape":7,"type":"IMAGE","link":161},{"localized_name":"index","name":"index","type":"INT","widget":{"name":"index"},"link":null},{"localized_name":"type_of_frame_distribution","name":"type_of_frame_distribution","type":"COMBO","widget":{"name":"type_of_frame_distribution"},"link":null},{"localized_name":"linear_frame_distribution_value","name":"linear_frame_distribution_value","type":"INT","widget":{"name":"linear_frame_distribution_value"},"link":null},{"localized_name":"dynamic_frame_distribution_values","name":"dynamic_frame_distribution_values","type":"STRING","widget":{"name":"dynamic_frame_distribution_values"},"link":null},{"localized_name":"type_of_strength_distribution","name":"type_of_strength_distribution","type":"COMBO","widget":{"name":"type_of_strength_distribution"},"link":null},{"localized_name":"linear_strength_value","name":"linear_strength_value","type":"STRING","widget":{"name":"linear_strength_value"},"link":null},{"localized_name":"dynamic_strength_values","name":"dynamic_strength_values","type":"STRING","widget":{"name":"dynamic_strength_values"},"link":null},{"localized_name":"relative_ipadapter_strength","name":"relative_ipadapter_strength","type":"FLOAT","widget":{"name":"relative_ipadapter_strength"},"link":null},{"localized_name":"relative_cn_strength","name":"relative_cn_strength","type":"FLOAT","widget":{"name":"relative_cn_strength"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[149]},{"localized_name":"POSITIVE","name":"POSITIVE","type":"CONDITIONING","links":[150]},{"localized_name":"NEGATIVE","name":"NEGATIVE","type":"CONDITIONING","links":[151]},{"localized_name":"NET_INDEX","name":"NET_INDEX","type":"INT","links":[152]},{"localized_name":"LOGS","name":"LOGS","type":"STRING","links":[153]}],"properties":{"Node name for S&R":"IPAdapterAnimateNode","widget_ue_connectable":{"index":true,"type_of_frame_distribution":true,"linear_frame_distribution_value":true,"dynamic_frame_distribution_values":true,"type_of_strength_distribution":true,"linear_strength_value":true,"dynamic_strength_values":true,"relative_ipadapter_strength":true,"relative_cn_strength":true}},"widgets_values":[0,"linear",8,"16,8,8,16","linear","(0.1,0.9)","(0.0,1.0),(0.0,1.0),(0.0,1.0),(0.0,1.0)",1,0.3]},{"id":23,"type":"IPAdapterModelLoader","pos":[1017,1004],"size":[315,58],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"ipadapter_file","name":"ipadapter_file","type":"COMBO","widget":{"name":"ipadapter_file"},"link":null}],"outputs":[{"label":"IP适配","localized_name":"IPADAPTER","name":"IPADAPTER","type":"IPADAPTER","slot_index":0,"links":[158]}],"properties":{"Node name for S&R":"IPAdapterModelLoader","widget_ue_connectable":{}},"widgets_values":["ip-adapter-plus_sd15.bin"]},{"id":24,"type":"CLIPVisionLoader","pos":[1022,1113],"size":[315,58],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null}],"outputs":[{"label":"CLIP视觉","localized_name":"CLIP_VISION","name":"CLIP_VISION","type":"CLIP_VISION","slot_index":0,"links":[159]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"CLIPVisionLoader","widget_ue_connectable":{}},"widgets_values":["SD1.5model.safetensors"]}],"links":[[127,52,0,51,1,"STRING"],[128,53,0,38,1,"VAE"],[129,38,0,51,0,"IMAGE"],[133,37,0,54,3,"LATENT"],[134,54,0,38,0,"LATENT"],[139,55,0,20,0,"CLIP"],[141,56,1,55,0,"CLIP"],[148,64,0,63,0,"IMAGE"],[149,68,0,54,0,"MODEL"],[150,68,1,54,1,"CONDITIONING"],[151,68,2,54,2,"CONDITIONING"],[152,68,3,12,0,"*"],[153,68,4,46,0,"STRING"],[155,56,0,68,1,"MODEL"],[156,20,0,68,2,"CONDITIONING"],[157,20,0,68,3,"CONDITIONING"],[158,23,0,68,4,"IPADAPTER"],[159,24,0,68,5,"CLIP_VISION"],[160,44,0,68,6,"CONTROL_NET"],[161,60,0,68,7,"IMAGE"],[162,69,0,58,0,"IMAGE"],[163,69,0,60,0,"IMAGE"],[164,69,0,68,0,"IMAGE"]],"groups":[{"id":1,"title":"合成视频","bounding":[1931,1288,646,568],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"workspace_info":{"id":"168361da-0903-423f-8546-a316d74035f6","name":"IPAnimate-demo"},"ds":{"scale":1.0546844340768087,"offset":[-701.853202262401,-646.3231364000121]},"ue_links":[],"links_added_by_ue":[],"frontendVersion":"1.16.9","VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}